<div class="post-preview">
  <a href="{{ url_for("posts.post", year=post.meta['published'].year, month=post.meta['published'].strftime('%m'), day=post.meta['published'].strftime('%d'), path=post.path) }}" class="post-preview-link">
    {% set is_protected = ('password' in post.meta and post.meta['password'] != false) %}
    <h2 class="post-title">
      {% if is_protected %}
        Protected Post
      {% else %}
        {{ post.title }}
      {% endif %}
    </h2>
    {% if post.subtitle and not is_protected %}
      <h3 class="post-subtitle">
        {{ post.subtitle }}
      </h3>
    {% endif %}
    {% if show_text and not is_protected %}
      {{ truncate_post_html(post.html)|safe }}
    {% endif %}
  </a>
  <p class="post-meta">Posted
    {% if SHOW_AUTHOR %}
    by <a href="{{ url_for('posts.author', author=post.author or DEFAULT_AUTHOR) }}">{{ post.author }}</a>
    {% endif %}
    on {{ post.published.strftime('%Y-%m-%d') }}.
  </p>
  {% if post.meta.tags|length %}
    <p>
      {% for post_tag in post.meta.tags %}
        <a href="{{ url_for("posts.tag", tag=post_tag) }}" class="tag">{{ post_tag }}</a>
      {% endfor %}
    </p>
  {% endif %}
</div>
<hr>
